<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Ydeliver by manojlds</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Ydeliver</h1>
        <p class="header">A .Net focused build and deployment framework</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/manojlds/YDeliver/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/manojlds/YDeliver/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/manojlds/YDeliver">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/manojlds">manojlds</a></p>


      </header>
      <section>
        <h1>YDeliver</h1>

<p>YDeliver is a (opinionated) build and deployment framework aimed at .NET projects.</p>

<p>YDeliver is based on Powershell and the amazing psake framework. It borrows the best practices ( Ydeliver strongly belived in convention over configuration) and tricks from across the industry, with the aim of quickly bootstrapping the build and release process of typical .NET projects. </p>

<h2>Getting Started</h2>

<p>You can include YDeliver as submodule within your project (recommended), or just have it as a Powershell module in your machine to invoke builds off.</p>

<div class="highlight"><pre><span class="nb">Import-Module</span> <span class="n">path</span><span class="p">\</span><span class="n">to</span><span class="p">\</span><span class="n">YDeliver</span>
</pre></div>

<p>You can also install YDeliver as a solution-level package using Nuget / Package manager:</p>

<div class="highlight"><pre><span class="n">Install-Package</span> <span class="n">ydeliver</span>
</pre></div>

<h2>YBuild</h2>

<p>YBuild is the build component of YDeliver. Typically, this component is for compiling, unit testing and packaging your artifacts. YBuild comes with prebuilt tasks to clean and compile your solution, run NUnit tests and package ( zip / nuget) up your artifacts.</p>

<p>For example, you can run the clean, compile and package tasks by doing </p>

<div class="highlight"><pre><span class="nb">Invoke-YBuild</span> <span class="n">Clean</span><span class="p">,</span><span class="n">Compile</span><span class="p">,</span><span class="n">Project</span>
</pre></div>

<p>To get a list of available tasks, you can do:</p>

<div class="highlight"><pre><span class="nb">Invoke-YBuild</span> <span class="n">-listAvailable</span>
</pre></div>

<p>You can override the <code>build.yml</code> settings by adding a <code>-config</code> parameter to <code>Invoke-YBuild</code>. See scaffolded <code>build.ps1</code> for example.</p>

<h2>YInstall</h2>

<p>YInstall component takes care of "installing" the build artifacts - be it zip files, installers, nuget packages etc.</p>

<p>You can install "applications". These can be certain modules within your project - like a service, web app etc or the entire project itself. Each applications is defined to be of certain tasks and the configurations needed to install them. For example:</p>

<div class="highlight"><pre><span class="l-Scalar-Plain">conventions</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">artifactsDir</span><span class="p-Indicator">:</span> <span class="s">"$rootDir/build"</span>

<span class="l-Scalar-Plain">install</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">ydeliver</span><span class="p-Indicator">:</span> 
        <span class="l-Scalar-Plain">tasks</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="s">"NugetPublish"</span><span class="p-Indicator">]</span>
        <span class="l-Scalar-Plain">config</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">packages</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="s">"ydeliver.*.nupkg"</span><span class="p-Indicator">]</span>
            <span class="l-Scalar-Plain">source</span><span class="p-Indicator">:</span> <span class="s">"NuGet</span><span class="nv"> </span><span class="s">official</span><span class="nv"> </span><span class="s">package</span><span class="nv"> </span><span class="s">source"</span>
</pre></div>

<p>The above configuration in a <code>install.yml</code> defines an application <code>ydeliver</code>. When you install this application, the task <code>NugetPublish</code> is run. The <code>config</code> section defines the configuration needed to run the tasks. Here the nuget packages and the nuget feed source are specified.</p>

<p>You can override the <code>install.yml</code> settings by adding a <code>-config</code> parameter to <code>Invoke-YInstall</code>. See scaffolded <code>install.ps1</code> for example.</p>

<h2>YDeploy</h2>

<p>Coming soon.</p>

<h2>Conventions</h2>

<p>YDeliver follows certain conventions, like where to pick up the solution file, how to recognize unit test dlls, etc. These conventions are specified under <code>Conventions\Defaults.ps1</code></p>

<p>You can specify your own, or modify the ones provided by the framework by adding the conventions key in the component config ( like build.yml):</p>

<div class="highlight"><pre><span class="l-Scalar-Plain">conventions</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">framework</span><span class="p-Indicator">:</span>  <span class="s">"3.5x86"</span>
    <span class="l-Scalar-Plain">solutionFile</span><span class="p-Indicator">:</span>   <span class="s">"$rootDir/name.sln"</span>
</pre></div>

<h2>Custom Tasks</h2>

<p>If you cannot add your own task directly into the component's task folder ( either because you are using YDeliver as a Nuget package and don't want to touch the installed files, or if your are using YDeliver as a submodule), you can add a file in your project root named <code>&lt;action&gt;.custom.tasks.ps1</code> and the tasks from it will be picked up as well.</p>

<p>For example, if you want to add custom tasks for YBuild, create a file named <code>build.custom.tasks.ps1</code> and place it in the root of your project. These task will now be available from <code>Invoke-YBuild</code>.</p>

<h2>Configuration</h2>

<p>You can specify configurations like which folders to package into artifacts, which projects to make nuget packages out off etc.</p>

<h3>build.yml</h3>

<p>Specifies the configurations for YBuild</p>

<p><code>copyContents</code> : For specifying files and folders to be copied from one place to another
<code>packageContents</code> : For specifying file and folders to be packages into zip files
<code>nugetSpecs</code> : For specifying the .nuspec files to be used to build nuget packages</p>

<p>Sample build.yml:</p>

<div class="highlight"><pre><span class="l-Scalar-Plain">copyContents</span><span class="p-Indicator">:</span>
    <span class="s">"$buildPath/cmd.dll"</span><span class="p-Indicator">:</span>   <span class="s">"$buildPath/Cmd"</span>
    <span class="s">"$buildPath/cmd.pdb"</span><span class="p-Indicator">:</span>   <span class="s">"$buildPath/Cmd"</span>
    <span class="s">"$buildPath/test"</span><span class="p-Indicator">:</span>      <span class="s">"$buildPath/Cmd"</span>

<span class="l-Scalar-Plain">packageContents</span><span class="p-Indicator">:</span>
    <span class="s">"$buildPath/Cmd"</span><span class="p-Indicator">:</span>  <span class="s">"Cmd.zip"</span>

<span class="l-Scalar-Plain">nugetSpecs</span><span class="p-Indicator">:</span>   <span class="p-Indicator">[</span><span class="nv">cmd.nuspec</span><span class="p-Indicator">]</span>
</pre></div>

<h2>YFlow</h2>

<p>YFlow is the developer workflow component. During the course of development, the developers would be running specific tasks at specific times. For example, you may want to run the <code>dbdeploy</code> task after updating some migrations. You may want to index solr after updating the config etc. Probably, when you run <code>dbdeploy</code>, you <em>also</em> want to reindex solr. Sometimes, these tasks may also cut across components ( YBuild, YInstall).</p>

<p>If you are not using workflows, you may have to do:</p>

<div class="highlight"><pre><span class="nb">Invoke-YBuild</span> <span class="n">dbdeploy</span>
<span class="nb">Invoke-YInstall</span> <span class="n">solr</span>
</pre></div>

<p>With <code>YFlow</code>, you can define these as your <code>workflows</code>. Scaffold the component to get <code>workflow.ps1</code> and <code>workflows.yml</code>.</p>

<div class="highlight"><pre><span class="nb">Invoke-YScaffold</span> <span class="n">YFlow</span>
</pre></div>

<p><code>workflow.yml</code> for the above scenario will look like this:</p>

<div class="highlight"><pre><span class="l-Scalar-Plain">workflow</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">dbsolr</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">ybuild</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">dbdeploy</span><span class="p-Indicator">]</span>
        <span class="l-Scalar-Plain">yinstall</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">solr</span><span class="p-Indicator">]</span>
</pre></div>

<p>Now, you can do:</p>

<div class="highlight"><pre><span class="nb">Invoke-YFlow</span> <span class="n">dbsolr</span> <span class="c">#or</span>
<span class="p">.\</span><span class="n">workflow</span><span class="p">.</span><span class="n">ps1</span> <span class="n">dbsolr</span>
</pre></div>

<p>You can merge the functionalities of <code>build.ps1</code> and <code>workflow.ps1</code> as appropriate.</p>

<p>Note that <code>YDeliver</code> doesn't encourage dependencies between task as specified using psake syntax. We believe it is better being explicit. <code>YFlow</code> may be the replacement for this.</p>

<h2>YScaffold</h2>

<p>This component helps you to quickly bootstrap a project's build and deploy. You can scaffold the files and scripts that are used by the different YDeliver component.</p>

<div class="highlight"><pre><span class="nb">Invoke-YScaffold</span> <span class="n">-Component</span> <span class="n">YBuild</span>
</pre></div>

<p>YScaffold will not replace files that already exist unless called with the <code>-Force</code> switch.</p>

<h2>What's ahead?</h2>

<p>Lots more documentation.
Bringing in the deploy component.</p>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		          <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-38743463-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>